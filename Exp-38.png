#include <stdio.h>
#include <stdlib.h>
int compare(const void *a, const void *b) {
    return (*(int *)a - *(int *)b);
}
void scanDiskSchedule(int requests[], int n, int head, int disk_size, int direction) {
    int seek_count = 0;
    int distance, cur_track;
    int i, j;
    qsort(requests, n, sizeof(int), compare);
    int pos = 0;
    for (i = 0; i < n; i++) {
        if (head < requests[i]) {
            pos = i;
            break;
        }
    }
    printf("\nSeek Sequence: ");
    if (direction == 1) {
        for (i = pos; i < n; i++) {
            cur_track = requests[i];
            distance = abs(cur_track - head);
            seek_count += distance;
            head = cur_track;
            printf("%d ", cur_track);
        }
        if (head != disk_size - 1) {
            distance = abs((disk_size - 1) - head);
            seek_count += distance;
            head = disk_size - 1;
        }
        for (i = pos - 1; i >= 0; i--) {
            cur_track = requests[i];
            distance = abs(cur_track - head);
            seek_count += distance;
            head = cur_track;
            printf("%d ", cur_track);
        }
    }
    else {
        for (i = pos - 1; i >= 0; i--) {
            cur_track = requests[i];
            distance = abs(cur_track - head);
            seek_count += distance;
            head = cur_track;
            printf("%d ", cur_track);
        }
        if (head != 0) {
            distance = abs(head - 0);
            seek_count += distance;
            head = 0;
        }
        for (i = pos; i < n; i++) {
            cur_track = requests[i];
            distance = abs(cur_track - head);
            seek_count += distance;
            head = cur_track;
            printf("%d ", cur_track);
        }
    }
    printf("\nTotal Seek Operations: %d\n", seek_count);
}
int main() {
    int n, i, head, disk_size, direction;
    printf("Enter number of requests: ");
    if (scanf("%d", &n) != 1 || n <= 0) {
        printf("Invalid number of requests.\n");
        return 1;
    }
    int requests[n];
    printf("Enter request sequence: ");
    for (i = 0; i < n; i++) {
        if (scanf("%d", &requests[i]) != 1 || requests[i] < 0) {
            printf("Invalid track number.\n");
            return 1;
        }
    }
    printf("Enter initial head position: ");
    if (scanf("%d", &head) != 1 || head < 0) {
        printf("Invalid head position.\n");
        return 1;
    }
    printf("Enter total disk size: ");
    if (scanf("%d", &disk_size) != 1 || disk_size <= 0) {
        printf("Invalid disk size.\n");
        return 1;
    }
    printf("Enter head movement direction (1 for high, 0 for low): ");
    if (scanf("%d", &direction) != 1 || (direction != 0 && direction != 1)) {
        printf("Invalid direction.\n");
        return 1;
    }
    scanDiskSchedule(requests, n, head, disk_size, direction);
    return 0;
}
