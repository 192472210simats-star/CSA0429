#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void* thread_function(void* arg) {
    int thread_num = *((int*)arg);
    printf("Thread %d: Started (Thread ID: %lu)\n", thread_num, pthread_self());

    if (thread_num == 2) {
        printf("Thread %d: Exiting early using pthread_exit\n", thread_num);
        pthread_exit(NULL);
    }

    printf("Thread %d: Finished normally\n", thread_num);
    return NULL; 
}

int main() {
    pthread_t t1, t2;
    int arg1 = 1, arg2 = 2;
    int ret;

    ret = pthread_create(&t1, NULL, thread_function, &arg1);
    if (ret != 0) {
        fprintf(stderr, "Error creating thread 1\n");
        return 1;
    }

    ret = pthread_create(&t2, NULL, thread_function, &arg2);
    if (ret != 0) {
        fprintf(stderr, "Error creating thread 2\n");
        return 1;
    }

    if (pthread_equal(t1, t2)) {
        printf("Thread 1 and Thread 2 have the SAME ID (unexpected)\n");
    } else {
        printf("Thread 1 and Thread 2 have DIFFERENT IDs (expected)\n");
    }

    pthread_join(t1, NULL);
    pthread_join(t2, NULL);

    printf("Main thread: Both threads have finished.\n");

    return 0;
}
